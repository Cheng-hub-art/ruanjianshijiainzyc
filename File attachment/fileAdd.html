<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
    <link rel="stylesheet" href="../css/public.css" media="all">
	<style>
		.myrequired{
			color: red;
			font-size: 20px;
			position: absolute;
			top: 15px;
			left: 30px;
			
		}
	</style>
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>附件上传</legend>
        </fieldset>

        <form class="layui-form" action="">
            <div class="layui-form-item">
                <label class="layui-form-label">
					<span class="myrequired">*</span>学号
				</label>
                <div class="layui-input-inline">
                    <input type="text" name="studentID" lay-verify="studentID" autocomplete="off" placeholder="请输入学号" class="layui-input">
                </div>
				<label class="layui-form-label">
					<span class="myrequired">*</span>姓名
				</label>
				<div class="layui-input-inline">
				    <input type="text" name="studentName" lay-verify="studentName" autocomplete="off" placeholder="请输入姓名" class="layui-input">
				</div>
            </div>
			<div class="layui-form-item">
			    <label class="layui-form-label">
					<span class="myrequired">*</span>班级
				</label>
			    <div class="layui-input-block">
			        <select name="class">
			           <option>请选择你的班级</option>
			           <option>24130404</option>
			           <option>24120403</option>
			           <option>24030417</option>
			       	   <option>24060305</option>
			       	   <option>24010327</option>
			       	   <option>24050533</option>
			       	   <option>24130408</option>
			       	   <option>24130435</option>
			        </select>
			    </div>
			</div>
			 <div class="layui-form-item">
				 <label class="layui-form-label">身份证<br>扫描件:</label>
				 <div class="layui-input-inline">
				     <div style="width: 132px;">
				       <div class="layui-upload-list">
				         <img class="layui-upload-img1" id="ID-upload-demo-img1" style="width: 100%; height: 92px;">
				         <div id="ID-upload-demo-text1"></div>
				       </div>
				       <div class="layui-progress layui-progress-big" lay-showPercent="yes" lay-filter="filter-demo1">
				         <div class="layui-progress-bar" lay-percent=""></div>
				       </div>
				     </div>
					 <button type="button" class="layui-btn" id="ID-upload-demo-btn1">
					   <i class="layui-icon layui-icon-upload"></i> 点击上传
					 </button>
				 </div>
				 <span class="layui-form-mid" style="color: #666;">正面</span>
				 
				 
				 <label class="layui-form-label"></label>
				 <div class="layui-input-inline">
				     <div style="width: 132px;">
				       <div class="layui-upload-list">
				         <img class="layui-upload-img2" id="ID-upload-demo-img2" style="width: 100%; height: 92px;">
				         <div id="ID-upload-demo-text2"></div>
				       </div>
				       <div class="layui-progress layui-progress-big" lay-showPercent="yes" lay-filter="filter-demo2">
				         <div class="layui-progress-bar" lay-percent=""></div>
				       </div>
				     </div>
					 <button type="button" class="layui-btn" id="ID-upload-demo-btn2">
					   <i class="layui-icon layui-icon-upload"></i> 点击上传
					 </button>
				 </div>
				 <span class="layui-form-mid" style="color: #666;">反面</span>
            </div>
			<br>
			
			<div class="layui-form-item">
			    <label class="layui-form-label">体检报告</label>
			    <div class="layui-input-block">
			        <div class="layui-upload">
			          
			          <div class="layui-upload-list">
			            <table class="layui-table">
			              <colgroup>
			                <col style="min-width: 100px;">
			                <col width="150">
			                <col width="260">
			                <col width="150">
			              </colgroup>
			              <thead>
			                <th>文件名</th>
			                <th>大小</th>
			                <th>上传进度</th>
			                <th>操作</th>
			              </thead>
			              <tbody id="ID-upload-demo-files-list"></tbody>
			            </table>
			          </div>
					  <button type="button" class="layui-btn layui-btn-normal" id="ID-upload-demo-files">选择文件</button> 
			          <button type="button" class="layui-btn" id="ID-upload-demo-files-action">开始上传</button>
			        </div>
			    </div>
			</div>
			<br>
			<div class="layui-form-item">
				 <label class="layui-form-label">青年大学习<br>截图</label>
				 <div class="layui-input-block">
				     <div class="layui-upload">
				       <button type="button" class="layui-btn" id="ID-upload-demo-btn-3">
				         <i class="layui-icon layui-icon-upload"></i> 多图片上传
				       </button> 
				       <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 11px;">
				         预览图：
				         <div class="layui-upload-list" id="upload-demo-preview"></div>
				      </blockquote>
				     </div>
				 </div>
			</div>
			
			<div class="layui-form-item">
				 <label class="layui-form-label">奖惩证书</label>
				 <div class="layui-input-block">
			        <div class="layui-upload">
			          <div class="layui-upload-list">
			            <table class="layui-table">
			              <colgroup>
			                <col style="min-width: 100px;">
			                <col width="150">
			                <col width="260">
			                <col width="150">
			              </colgroup>
			              <thead>
			                <th>文件名</th>
			                <th>大小</th>
			                <th>上传进度</th>
			                <th>操作</th>
			              </thead>
			              <tbody id="ID-upload-demo-files-list2"></tbody>
			            </table>
			          </div>
					  <button type="button" class="layui-btn layui-btn-normal" id="ID-upload-demo-files2">选择文件</button> 
			          <button type="button" class="layui-btn" id="ID-upload-demo-files-action2">开始上传</button>
			        </div>
			    </div>
			</div>
			
			
			
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
<script>
  layui.use(function(){
    var laydate = layui.laydate;
    laydate.render({
      elem: '#Yearofadmission'
    });
  });
</script>
<script>
    layui.use(['form'], function () {
        var form = layui.form
            , layer = layui.layer
        form.verify({
				 studentID: function (value) {
				    let reg=/^[\d]{10}$/
					if(!reg.test(value)){
						return("学号必须是10位整数");
					}
				},
				
				studentName: function (value) {
						let reg=/^[\u4e00-\u9fa5]{1,20}$/
						if(!reg.test(value)){
							return("姓名是1-20个汉字");
						}
					}
        });

        //监听提交
        form.on('submit(demo1)', function (data) {
            layer.alert(JSON.stringify(data.field), {
                title: '最终的提交信息',
				end:function(){
					var index=parent.layer.getFrameIndex(window.name);
					parent.layer.close(index);
				}
            })
            return false;
        });
    });
</script>

<!-- <script src="//unpkg.com/layui@2.11.6/dist/layui.js"></script> -->
<script>
layui.use(function(){
  var upload = layui.upload;
  var layer = layui.layer;
  var element = layui.element;
  var $ = layui.$;
  // 单图片上传
  var uploadInst = upload.render({
    elem: '#ID-upload-demo-btn1',
    url: '', // 实际使用时改成您自己的上传接口即可。
    before: function(obj){
      // 预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#ID-upload-demo-img1').attr('src', result); // 图片链接（base64）
      });
      
      element.progress('filter-demo1', '0%'); // 进度条复位
      layer.msg('上传中', {icon: 16, time: 0});
    },
    done: function(res){
      // 若上传失败
      if(res.code > 0){
        return layer.msg('上传失败');
      }
      // 上传成功的一些操作
      // …
      $('#ID-upload-demo-text1').html(''); // 置空上传失败的状态
    },
    error: function(){
      // 演示失败状态，并实现重传
      var demoText = $('#ID-upload-demo-text1');
      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
      demoText.find('.demo-reload').on('click', function(){
        uploadInst.upload();
      });
    },
    // 进度条
    progress: function(n, elem, e){
      element.progress('filter-demo1', n + '%'); // 可配合 layui 进度条元素使用
      if(n == 100){
        layer.msg('上传完毕', {icon: 1});
      }
    }
	
  });
  
  var uploadInst = upload.render({
    elem: '#ID-upload-demo-btn2',
    url: '', // 实际使用时改成您自己的上传接口即可。
    before: function(obj){
      // 预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#ID-upload-demo-img2').attr('src', result); // 图片链接（base64）
      });
      
      element.progress('filter-demo2', '0%'); // 进度条复位
      layer.msg('上传中', {icon: 16, time: 0});
    },
    done: function(res){
      // 若上传失败
      if(res.code > 0){
        return layer.msg('上传失败');
      }
      // 上传成功的一些操作
      // …
      $('#ID-upload-demo-text2').html(''); // 置空上传失败的状态
    },
    error: function(){
      // 演示失败状态，并实现重传
      var demoText = $('#ID-upload-demo-text2');
      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
      demoText.find('.demo-reload').on('click', function(){
        uploadInst.upload();
      });
    },
    // 进度条
    progress: function(n, elem, e){
      element.progress('filter-demo2', n + '%'); // 可配合 layui 进度条元素使用
      if(n == 100){
        layer.msg('上传完毕', {icon: 1});
      }
    }
  });
});
</script>
<script>
layui.use(function(){
  var upload = layui.upload;
  var element = layui.element;
  var $ = layui.$;
  // 制作多文件上传表格
  var uploadListIns = upload.render({
    elem: '#ID-upload-demo-files',
    elemList: $('#ID-upload-demo-files-list'), // 列表元素对象
    url: '', // 实际使用时改成您自己的上传接口即可。
    accept: 'file',
    multiple: true,
    number: 3,
    auto: false,
    bindAction: '#ID-upload-demo-files-action',
    choose: function(obj){   
      var that = this;
      var files = this.files = obj.pushFile(); // 将每次选择的文件追加到文件队列
      // 读取本地文件
      obj.preview(function(index, file, result){
        var tr = $(['<tr id="upload-'+ index +'">',
          '<td>'+ file.name +'</td>',
          '<td>'+ (file.size/1024).toFixed(1) +'kb</td>',
          '<td><div class="layui-progress" lay-filter="progress-demo-'+ index +'"><div class="layui-progress-bar" lay-percent=""></div></div></td>',
          '<td>',
            '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>',
            '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>',
          '</td>',
        '</tr>'].join(''));
        
        // 单个重传
        tr.find('.demo-reload').on('click', function(){
          obj.upload(index, file);
        });
        
        // 删除
        tr.find('.demo-delete').on('click', function(){
          delete files[index]; // 删除对应的文件
          tr.remove(); // 删除表格行
          // 清空 input file 值，以免删除后出现同名文件不可选
          uploadListIns.config.elem.next()[0].value = ''; 
        });
        
        that.elemList.append(tr);
        element.render('progress'); // 渲染新加的进度条组件
      });
    },
    done: function(res, index, upload){ // 成功的回调
      var that = this;
      // if(res.code == 0){ // 上传成功
        var tr = that.elemList.find('tr#upload-'+ index)
        var tds = tr.children();
        tds.eq(3).html(''); // 清空操作
        delete this.files[index]; // 删除文件队列已经上传成功的文件
        return;
      //}
      this.error(index, upload);
    },
    allDone: function(obj){ // 多文件上传完毕后的状态回调
      console.log(obj)
    },
    error: function(index, upload){ // 错误回调
      var that = this;
      var tr = that.elemList.find('tr#upload-'+ index);
      var tds = tr.children();
       // 显示重传
      tds.eq(3).find('.demo-reload').removeClass('layui-hide');
    },
    progress: function(n, elem, e, index){ // 注意：index 参数为 layui 2.6.6 新增
      element.progress('progress-demo-'+ index, n + '%'); // 执行进度条。n 即为返回的进度百分比
    }
  });
});
</script>

<script>
layui.use(function(){
  var upload = layui.upload;
  var layer = layui.layer;
  var element = layui.element;
  var $ = layui.$;
  var uploadInst = upload.render({
    elem: '#ID-upload-demo-btn-3',
    url: '', // 实际使用时改成您自己的上传接口即可。
    multiple: true,
    before: function(obj){
      // 预读本地文件示例，不支持ie8
      obj.preview(function(index, file, result){
        $('#upload-demo-preview').append('<img src="'+ result +'" alt="'+ file.name +'" style="width: 90px; height: 90px;">')
      });
    },
    done: function(res){
      // 上传完毕
      // …
    }
  });
});
</script>

<script>
layui.use(function(){
  var upload = layui.upload;
  var element = layui.element;
  var $ = layui.$;
  // 制作多文件上传表格
  var uploadListIns = upload.render({
    elem: '#ID-upload-demo-files2',
    elemList: $('#ID-upload-demo-files-list2'), // 列表元素对象
    url: '', // 实际使用时改成您自己的上传接口即可。
    accept: 'file',
    multiple: true,
    number: 3,
    auto: false,
    bindAction: '#ID-upload-demo-files-action2',
    choose: function(obj){   
      var that = this;
      var files = this.files = obj.pushFile(); // 将每次选择的文件追加到文件队列
      // 读取本地文件
      obj.preview(function(index, file, result){
        var tr = $(['<tr id="upload-'+ index +'">',
          '<td>'+ file.name +'</td>',
          '<td>'+ (file.size/1024).toFixed(1) +'kb</td>',
          '<td><div class="layui-progress" lay-filter="progress-demo-'+ index +'"><div class="layui-progress-bar" lay-percent=""></div></div></td>',
          '<td>',
            '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>',
            '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>',
          '</td>',
        '</tr>'].join(''));
        
        // 单个重传
        tr.find('.demo-reload').on('click', function(){
          obj.upload(index, file);
        });
        
        // 删除
        tr.find('.demo-delete').on('click', function(){
          delete files[index]; // 删除对应的文件
          tr.remove(); // 删除表格行
          // 清空 input file 值，以免删除后出现同名文件不可选
          uploadListIns.config.elem.next()[0].value = ''; 
        });
        
        that.elemList.append(tr);
        element.render('progress'); // 渲染新加的进度条组件
      });
    },
    done: function(res, index, upload){ // 成功的回调
      var that = this;
      // if(res.code == 0){ // 上传成功
        var tr = that.elemList.find('tr#upload-'+ index)
        var tds = tr.children();
        tds.eq(3).html(''); // 清空操作
        delete this.files[index]; // 删除文件队列已经上传成功的文件
        return;
      //}
      this.error(index, upload);
    },
    allDone: function(obj){ // 多文件上传完毕后的状态回调
      console.log(obj)
    },
    error: function(index, upload){ // 错误回调
      var that = this;
      var tr = that.elemList.find('tr#upload-'+ index);
      var tds = tr.children();
       // 显示重传
      tds.eq(3).find('.demo-reload').removeClass('layui-hide');
    },
    progress: function(n, elem, e, index){ // 注意：index 参数为 layui 2.6.6 新增
      element.progress('progress-demo-'+ index, n + '%'); // 执行进度条。n 即为返回的进度百分比
    }
  });
});
</script>

</body>
</html>